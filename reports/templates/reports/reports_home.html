<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ุงูุตูุญุฉ ุงูููุญุฏุฉ ููุชูุงุฑูุฑ</title>

    <!-- Bootstrap ูู CDN (ุฅุฐุง ูู ููู ุนูุฏู ููู ูุญูู) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f4f6f9;
        }
        .sidebar {
            height: 100vh;
            overflow-y: auto;
            background-color: #ffffff;
            border-left: 1px solid #ddd;
        }
        .report-frame {
            width: 100%;
            height: 100vh;
            border: none;
            background-color: #ffffff;
        }
        .app-title {
            font-size: 1.2rem;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container-fluid">
    <div class="row">
        <!-- ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ -->
        <div class="col-md-3 col-lg-2 sidebar p-3">
            <div class="app-title mb-3 text-center">
                ๐ ุชูุงุฑูุฑ ุงููุธุงู
            </div>

            <h6 class="text-muted mt-3 mb-2">ุงุณุชููุงู ุงูููุงุฏ ุงูุฎุงู</h6>
            <div class="list-group mb-3">
                <div class="list-group mb-3">

                    <a href="{% url 'raw_material_consumption_summary' %}"
                       target="report_frame"
                       class="list-group-item list-group-item-action">
                        ๐ ุชูุฑูุฑ ุชุฌููุนู ูุงุณุชููุงู ุงูููุงุฏ ุงูุฎุงู
                    </a>

                    <a href="{% url 'raw_material_consumption_detail' %}"
                       target="report_frame"
                       class="list-group-item list-group-item-action">
                        ๐ ุชูุฑูุฑ ุชูุตููู ูุงุณุชููุงู ุงูููุงุฏ ุงูุฎุงู
                    </a>

                    <a href="{% url 'raw_material_usage_by_product' %}"
                       target="report_frame"
                       class="list-group-item list-group-item-action">
                        ๐ ุชูุฑูุฑ ุชูุฒูุน ุงููุงุฏุฉ ุงูุฎุงู ุนูู ุงูููุชุฌุงุช
                    </a>

                    <a href="{% url 'raw_material_consumption_with_manufactured_detail' %}"
                       target="report_frame"
                       class="list-group-item list-group-item-action">
                        ๐ฆ ุชูุฑูุฑ ุชูุตููู ูุงุณุชููุงู ุงูููุงุฏ ุงูุฎุงู + ุชูููู ุงูููุงุฏ ุงููุตูุนุฉ
                    </a>

                    <a href="{% url 'product_cost_breakdown' %}"
                       target="report_frame"
                       class="list-group-item list-group-item-action">
                        ๐ฐ ุชูุฑูุฑ ุชูููุฉ ุงูููุชุฌ ูู ุงููุตูุฉ
                    </a>

                    <a href="{% url 'product_cost_flat' %}"
                       target="report_frame"
                       class="list-group-item list-group-item-action">
                        ๐งพ ุชูุฑูุฑ ุชูููุฉ ุงูููุชุฌ (ุชุฌููุนู ุจุงููุญุฏุงุช)
                    </a>

                    <a href="{% url 'product_cost_with_big_units' %}"
                       target="report_frame"
                       class="list-group-item list-group-item-action">
                        ๐งฎ ุชูุฑูุฑ ุชูููุฉ ุงูููุชุฌ (ูุญุฏุงุช ุงูุดุฑุงุก ุงููุจูุฑุฉ)
                    </a>
                </div>
            </div>
            <h6 class="text-muted mt-4 mb-2">ุชูุงุฑูุฑ ุงููุดุชุฑูุงุช</h6>
            <div class="list-group mb-3">
                <a href="{% url 'purchase_price_comparison' %}"
                   target="report_frame"
                   class="list-group-item list-group-item-action">
                    ๐น ุชูุฑูุฑ ููุงุฑูุฉ ุฃุณุนุงุฑ ุงููุดุชุฑูุงุช ุจูู ุงูุดููุฑ
                </a>

            </div>
            <h6 class="text-muted mt-4 mb-2">ุงูููุงุฆู ุงููุงููุฉ</h6>
            <div class="list-group mb-3">
                <a href="{% url 'income_statement' %}"
                target="report_frame"
                class="list-group-item list-group-item-action">
                    ๐ ูุงุฆูุฉ ุงูุฏุฎู
                </a>
            </div>
            <a href="{% url 'income_statement_drilldown' %}"
            target="report_frame"
            class="list-group-item list-group-item-action">
                ๐ ูุงุฆูุฉ ุงูุฏุฎู ุงูุชูุตูููุฉ (Drilldown)
                </a>

               <h6 class="text-muted mt-4 mb-2">ุงูุชุณุนูุฑ</h6>
            <div class="list-group mb-3">
            <a href="/pricing/dashboard/?embed=1"
                target="report_frame"
                class="list-group-item list-group-item-action">
                ๐ง ููุญุฉ ุงูุชุณุนูุฑ (ุณููุงุฑูููุงุช ูุณูุงุณุงุช)
            </a>

            <a href="/pricing/product/?embed=1"
            target="report_frame"
            class="list-group-item list-group-item-action">
            ๐ฏ ุชุณุนูุฑ ููุชุฌ ูุงุญุฏ (ุณููุงุฑูู)
            </a>

            <a href="/pricing/product/?embed=1" target="report_frame" class="list-group-item list-group-item-action">
                ๐งพ ุชุณุนูุฑ ููุชุฌ ูุงุญุฏ (ูุญุงูุงุฉ)
                </a>
          </div>
 
           </div>

        <!-- ููุทูุฉ ุนุฑุถ ุงูุชูุฑูุฑ -->
        <div class="col-md-9 col-lg-10 p-0">
            <!-- ูุชู ุนุฑุถ ุงูุชูุฑูุฑ ุฏุงุฎู ูุฐุง ุงูู iframe -->
            <iframe
                id="reportFrame"
                name="report_frame"
                class="report-frame"
                src="{% url 'raw_material_consumption_summary' %}">
            </iframe>
        </div>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    var iframe = document.getElementById("reportFrame");

    // 1) ุนูุฏ ุชุญููู ุงูุตูุญุฉ: ูู ููู ุชูุฑูุฑ ูุญููุธุ ุงุนุฑุถู ุจุฏู ุงูุงูุชุฑุงุถู
    var savedUrl = localStorage.getItem("current_report_url");
    if (savedUrl) {
        iframe.src = savedUrl;
    } else {
        // ุญูุธ ุงูุชูุฑูุฑ ุงูุงูุชุฑุงุถู ูุฃูู ูุฑุฉ
        var defaultUrl = "{% url 'raw_material_consumption_summary' %}";
        localStorage.setItem("current_report_url", defaultUrl);
    }

    // 2) ูู ุงูุฑูุงุจุท ุงูุชู ุชูุชุญ ุฏุงุฎู ุงูู iframe
    var reportLinks = document.querySelectorAll("a[target='report_frame']");

    reportLinks.forEach(function (link) {
        link.addEventListener("click", function () {
            // ุญูุธ ุฑุงุจุท ุงูุชูุฑูุฑ ุงูุฐู ุชู ุงูุถุบุท ุนููู
            localStorage.setItem("current_report_url", this.href);
        });
    });
});
</script>

</body>
</html>
